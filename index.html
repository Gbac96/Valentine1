<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬øQuieres ser mi Valentine? üíñ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* RESET Y CONFIGURACI√ìN BASE */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-pink: #ff4d6d;
            --secondary-pink: #ff3366;
            --light-pink: #ffe6ec;
            --dark-pink: #ff1e4d;
            --white: #ffffff;
            --gray: #333333;
            --light-gray: #f5f5f5;
            --shadow: 0 10px 30px rgba(255, 77, 109, 0.25);
            --transition: all 0.3s ease;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, 
                #ff758c 0%, 
                #ff7eb3 25%, 
                #ff9ec5 50%, 
                #f9c5d1 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            overflow-x: hidden;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        /* CONTENEDOR PRINCIPAL RESPONSIVE */
        .container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        /* TARJETA PRINCIPAL */
        .card {
            background: var(--white);
            border-radius: 25px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 5px solid var(--primary-pink);
            position: relative;
            overflow: hidden;
            animation: cardEntrance 0.8s ease-out;
            display: block;
        }

        .card.hidden {
            display: none !important;
        }

        @keyframes cardEntrance {
            0% {
                transform: translateY(30px) scale(0.95);
                opacity: 0;
            }
            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        /* DECORACI√ìN DE CORAZONES */
        .heart-decoration {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 8px;
            z-index: 2;
        }

        .heart-decoration i {
            color: var(--primary-pink);
            font-size: 18px;
            animation: heartbeat 1.5s infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* T√çTULOS RESPONSIVE */
        h1 {
            color: var(--primary-pink);
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            text-align: center;
            margin-bottom: 20px;
            line-height: 1.3;
        }

        h2 {
            color: var(--secondary-pink);
            font-size: clamp(1.4rem, 4vw, 1.8rem);
            text-align: center;
            margin: 20px 0 10px;
        }

        /* MENSAJES */
        .message-box {
            background: linear-gradient(135deg, var(--light-pink), #fff5f7);
            border-radius: 18px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid var(--primary-pink);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .message-box p {
            font-size: clamp(1rem, 3vw, 1.1rem);
            color: var(--gray);
            line-height: 1.6;
            text-align: center;
        }

        /* CONTADOR DE TIEMPO */
        .contador {
            background: linear-gradient(135deg, #fff0f5, #ffe6ec);
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            border: 3px dashed var(--primary-pink);
            text-align: center;
        }

        .time-display {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .time-unit {
            flex: 1;
            min-width: 80px;
            text-align: center;
        }

        .time-unit span {
            display: block;
            font-size: clamp(1.8rem, 6vw, 2.5rem);
            font-weight: bold;
            color: var(--primary-pink);
        }

        .time-unit small {
            display: block;
            font-size: clamp(0.8rem, 2.5vw, 0.9rem);
            color: var(--secondary-pink);
            margin-top: 5px;
            font-weight: 600;
        }

        .total-days {
            font-size: clamp(0.9rem, 3vw, 1rem);
            color: var(--dark-pink);
            font-weight: bold;
            background: rgba(255, 255, 255, 0.8);
            padding: 10px 15px;
            border-radius: 10px;
            display: inline-block;
        }

        /* IM√ÅGENES RESPONSIVE */
        .img-container {
            margin: 25px auto;
            text-align: center;
        }

        .img-frame {
            width: clamp(150px, 40vw, 200px);
            height: clamp(150px, 40vw, 200px);
            margin: 0 auto 15px;
            border-radius: 50%;
            overflow: hidden;
            border: 5px solid var(--primary-pink);
            box-shadow: 0 10px 25px rgba(255, 77, 109, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--light-pink);
            position: relative;
        }

        .img-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .img-frame:hover img {
            transform: scale(1.05);
        }

        .image-label {
            font-size: clamp(0.9rem, 3vw, 1rem);
            color: var(--primary-pink);
            font-weight: bold;
            margin-top: 10px;
        }

        .img-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--primary-pink);
        }

        .img-placeholder i {
            font-size: clamp(2.5rem, 8vw, 4rem);
            margin-bottom: 10px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* BOTONES - VERSI√ìN SIMPLIFICADA */
        .buttons-container {
            position: relative;
            margin: 30px 0;
            min-height: 150px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            border: 3px solid var(--light-pink);
        }

        button {
            padding: clamp(15px, 4vw, 18px) clamp(25px, 5vw, 35px);
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
            min-width: 140px;
            min-height: 55px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        /* BOT√ìN S√ç */
        .btn-yes {
            background: linear-gradient(135deg, var(--primary-pink), var(--dark-pink));
            color: var(--white);
            z-index: 10;
            animation: yesPulse 2s infinite;
            box-shadow: 0 8px 25px rgba(255, 77, 109, 0.5);
        }

        @keyframes yesPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 8px 25px rgba(255, 77, 109, 0.5);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 12px 30px rgba(255, 77, 109, 0.7);
            }
        }

        /* BOT√ìN NO - SIMPLIFICADO */
        .btn-no {
            background: linear-gradient(135deg, #cccccc, #999999);
            color: #666666;
            position: relative;
            z-index: 9;
            animation: noShake 0.5s infinite;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: none !important;
            transition: all 0.3s ease !important;
            margin: 0 !important;
        }

        @keyframes noShake {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(5px, 5px) rotate(2deg); }
            50% { transform: translate(-5px, -5px) rotate(-2deg); }
            75% { transform: translate(3px, -3px) rotate(1deg); }
        }

        /* Animaci√≥n espec√≠fica para m√≥viles */
        @keyframes mobileNoShake {
            0%, 100% { transform: translate(8px, 8px) rotate(3deg); }
            25% { transform: translate(-8px, -8px) rotate(-3deg); }
            50% { transform: translate(6px, -6px) rotate(2deg); }
            75% { transform: translate(-6px, 6px) rotate(-2deg); }
        }

        /* BOTONES FALSOS */
        .btn-fake {
            background: linear-gradient(135deg, #ffd166, #ffb347);
            color: #333;
            opacity: 0.9;
            z-index: 8;
        }

        /* ADVERTENCIA */
        .warning {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            color: #856404;
            padding: 12px 15px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: clamp(0.8rem, 2.5vw, 0.9rem);
            text-align: center;
            border: 2px solid #ffc107;
            animation: warningFlash 2s infinite;
        }

        @keyframes warningFlash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* NOTAS */
        .date-note {
            font-size: clamp(0.85rem, 2.5vw, 0.95rem);
            color: #888;
            text-align: center;
            margin: 10px 0;
            font-style: italic;
        }

        /* PANTALLA FINAL */
        .final-screen {
            animation: celebrate 0.8s ease-out;
            display: none;
        }

        @keyframes celebrate {
            0% {
                transform: scale(0.8) rotate(-5deg);
                opacity: 0;
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .celebration-animation {
            position: absolute;
            top: -20px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            z-index: 2;
        }

        .celebration-animation i {
            font-size: 30px;
            color: var(--primary-pink);
            animation: floatUp 2s infinite alternate;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); }
            100% { transform: translateY(-15px) scale(1.2); }
        }

        /* TIMER EN VIVO */
        .live-timer {
            background: linear-gradient(135deg, #fff0f5, #ffe4ec);
            border-radius: 20px;
            padding: 20px;
            margin: 25px 0;
            border: 3px solid var(--primary-pink);
        }

        .timer-display {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
        }

        .timer-unit {
            text-align: center;
            flex: 1;
            min-width: 70px;
        }

        .timer-unit span {
            display: block;
            font-size: clamp(1.8rem, 6vw, 2.2rem);
            font-weight: bold;
            color: var(--primary-pink);
            animation: timerPulse 1s infinite alternate;
        }

        @keyframes timerPulse {
            from { text-shadow: 0 0 5px rgba(255, 77, 109, 0.5); }
            to { text-shadow: 0 0 15px rgba(255, 77, 109, 0.8); }
        }

        /* BOT√ìN REINICIAR */
        .btn-restart {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: var(--white);
            width: 100%;
            margin-top: 20px;
            padding: 15px;
        }

        .btn-restart:hover {
            background: linear-gradient(135deg, #45a049, #3d8b40);
            transform: translateY(-3px);
        }

        /* CORAZONES FLOTANTES */
        .hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .heart-float {
            position: absolute;
            font-size: clamp(18px, 4vw, 24px);
            color: var(--primary-pink);
            animation: floatHeart 6s linear infinite;
            opacity: 0.7;
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) rotate(360deg) scale(1);
                opacity: 0;
            }
        }

        /* ============ RESPONSIVE DESIGN ============ */

        /* M√ìVILES PEQUE√ëOS (hasta 480px) */
        @media (max-width: 480px) {
            .card {
                padding: 20px 15px;
                border-radius: 20px;
            }
            
            .buttons-container {
                flex-direction: column;
                min-height: 200px;
                padding: 15px;
                gap: 12px;
            }
            
            .buttons-container button {
                width: 100%;
                max-width: 250px;
                min-width: unset;
                min-height: 60px;
                font-size: 1.1rem;
                padding: 16px 20px;
            }
            
            /* Orden espec√≠fico para m√≥viles */
            .btn-yes {
                order: 1;
            }
            
            .btn-no {
                order: 2;
                animation: mobileNoShake 0.4s infinite;
            }
            
            .btn-fake {
                order: 3;
            }
            
            .time-display, .timer-display {
                gap: 5px;
            }
            
            .time-unit, .timer-unit {
                min-width: 60px;
            }
        }

        /* TABLETS (481px a 768px) */
        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                max-width: 450px;
            }
            
            .card {
                padding: 30px 25px;
            }
            
            .img-frame {
                width: 180px;
                height: 180px;
            }
            
            .btn-no {
                animation: mobileNoShake 0.3s infinite;
            }
        }

        /* ESCRITORIO (769px en adelante) */
        @media (min-width: 769px) {
            .container {
                max-width: 500px;
            }
            
            .card {
                padding: 35px 30px;
            }
            
            .img-frame {
                width: 200px;
                height: 200px;
            }
            
            .btn-yes:hover {
                transform: scale(1.1);
                background: linear-gradient(135deg, var(--dark-pink), #ff0066);
            }
            
            .btn-fake:hover {
                opacity: 1;
                transform: translateY(-3px);
            }
        }

        /* ACCESIBILIDAD: REDUCIR ANIMACIONES */
        @media (prefers-reduced-motion: reduce) {
            .heart-float, .btn-no, .btn-yes, .heart-decoration i,
            .celebration-animation i, .timer-unit span, .img-placeholder i {
                animation: none;
                transition: none;
            }
        }
    </style>
</head>
<body>
    <!-- Corazones flotantes de fondo -->
    <div class="hearts" id="hearts"></div>
    
    <!-- Contenedor principal -->
    <div class="container">
        <!-- Tarjeta principal -->
        <div class="card" id="mainCard">
            <div class="heart-decoration">
                <i class="fas fa-heart"></i>
                <i class="fas fa-heart"></i>
                <i class="fas fa-heart"></i>
            </div>
            
            <h1><i class="fas fa-heart"></i> MI NI√ëA BONITA  <i class="fas fa-heart"></i></h1>
            
            <div class="message-box">
                <p>Desde que llegaste a mi vida cada d√≠a es m√°s especial. Eres la persona con la que quiero pasar el resto de mi vida.</p>
            </div>

            <!-- Contador de tiempo -->
            <div class="contador" id="contador">
                <div class="time-display">
                    <div class="time-unit">
                        <span id="years">0</span>
                        <small>A√±os</small>
                    </div>
                    <div class="time-unit">
                        <span id="months">0</span>
                        <small>Meses</small>
                    </div>
                    <div class="time-unit">
                        <span id="days">0</span>
                        <small>D√≠as</small>
                    </div>
                </div>
                <div class="total-days">
                    <i class="fas fa-heart-circle"></i>
                    <span id="totalDays">0</span> d√≠as amandote
                </div>
            </div>

            <!-- Imagen de ella -->
            <div class="img-container">
                <div class="img-frame" id="noviaContainer">
                    <div class="img-placeholder">
                        <i class="fas fa-heart-circle-plus"></i>
                        <p>Mi amor</p>
                    </div>
                </div>
                <div class="image-label">
                    <i class="fas fa-star"></i> Mi persona favorita <i class="fas fa-star"></i>
                </div>
            </div>

            <!-- Pregunta -->
            <div class="question-box">
                <h2><i class="fas fa-ring"></i> ¬øQuieres ser mi Valentine? <i class="fas fa-ring"></i></h2>
                <div class="date-note">
                    <i class="fas fa-infinity"></i> Hoy y para siempre <i class="fas fa-infinity"></i>
                </div>
            </div>

            <!-- Botones - VERSI√ìN SIMPLIFICADA -->
            <div class="buttons-container">
                <button class="btn-yes" id="yes">
                    <i class="fas fa-heart"></i> ¬°S√ç! <i class="fas fa-heart"></i>
                </button>
                
                <!-- Bot√≥n NO simplificado -->
                <button class="btn-no" id="no">
                    <i class="fas fa-sad-cry"></i> No <i class="fas fa-sad-cry"></i>
                </button>
                
                <!-- Botones falsos -->
                <button class="btn-fake" id="fake1">Tal vez</button>
                <button class="btn-fake" id="fake2">No s√©</button>
                <button class="btn-fake" id="fake3">Preg√∫ntame despu√©s</button>
            </div>

            <!-- Advertencia -->
            <div class="warning">
               
            </div>
        </div>

        <!-- Pantalla final (oculta inicialmente) -->
        <div class="card final-screen hidden" id="finalCard">
            <div class="celebration-animation">
                <i class="fas fa-heart-circle"></i>
                <i class="fas fa-heart-circle"></i>
                <i class="fas fa-heart-circle"></i>
            </div>
            
            <h1><i class=></i> SABIA QUE NO PODRIAS VIVIR SIN MI  üòé <i class=></i></h1>
            
            <div class="message-box final-message">
                <p>¬°Mi amor! üíï</p>
                <p>Me haces la persona m√°s feliz del universo. Cada momento a tu lado es un regalo del cielo.</p>
                <p class="love-promise">
                    <i class=></i>
                    Prometo amarte hoy, ma√±ana y por toda la eternidad
                    <i class="fas fa-heart"></i>
                </p>
            </div>
            
            <!-- Imagen de ambos -->
            <div class="img-container">
                <div class="img-frame couple-frame" id="parejaContainer">
                    <div class="img-placeholder">
                        <i class="fas fa-hearts"></i>
                        <p>Nosotros</p>
                    </div>
                </div>
                <div class="image-label">
                    <i class="fas fa-hearts"></i> Juntos para siempre <i class="fas fa-hearts"></i>
                </div>
            </div>
            
            <!-- Contador en tiempo real -->
            <div class="live-timer" id="liveTimer">
                <div class="timer-display">
                    <div class="timer-unit">
                        <span id="liveDays">0</span>
                        <small>D√≠as</small>
                    </div>
                    <div class="timer-unit">
                        <span id="liveHours">0</span>
                        <small>Horas</small>
                    </div>
                    <div class="timer-unit">
                        <span id="liveMinutes">0</span>
                        <small>Minutos</small>
                    </div>
                    <div class="timer-unit">
                        <span id="liveSeconds">0</span>
                        <small>Segundos</small>
                    </div>
                </div>
                <div class="timer-text">
                    <i class=></i> üíïDe estar enamorado de mi ni√±a de cabello azul üíï
                </div>
            </div>
            
            <!-- Bot√≥n para volver -->
            <button class="btn-restart" id="restart">
                <i class="fas fa-redo"></i> Ver nuestro amor otra vez
            </button>
        </div>
    </div>

    <script>
        // üìÖ Fecha de inicio: 27 de febrero de 2025
        const inicio = new Date(2025, 1, 27);
        
        // Elementos DOM
        const mainCard = document.getElementById('mainCard');
        const finalCard = document.getElementById('finalCard');
        const yesBtn = document.getElementById('yes');
        const noBtn = document.getElementById('no');
        const heartsContainer = document.getElementById('hearts');
        const fakeButtons = ['fake1', 'fake2', 'fake3'].map(id => document.getElementById(id));
        const restartBtn = document.getElementById('restart');
        const noviaContainer = document.getElementById('noviaContainer');
        const parejaContainer = document.getElementById('parejaContainer');

        // Variables para el bot√≥n NO
        let escapeMode = true;
        let failedClicks = 0;
        let isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

        // Variables para control de estado
        let liveTimerInterval = null;
        let heartInterval = null;

        // Mensajes cuando intentan hacer clic en "No"
        const failMessages = [
             "Uy no, quieres dejar a Willow sin Pap√°",
            "¬°Hazme caso!",
            "Mi amor te atrapa üíò",
            "¬°Que nooooo! üõ°Ô∏è",
            "Intento #% fallido ‚ùå",
            "A tu mam√° le voy a decir",
            "Te vas a quedar pelona",
            "¬øEn serio cre√≠ste que podr√≠as? ",
            "Protecci√≥n anti-clic activada ",
            "¬°El amor siempre gana! üíñ"
        ];

        // ============ INICIALIZACI√ìN ============
        document.addEventListener('DOMContentLoaded', function() {
            // Asegurar que las tarjetas est√©n en estado correcto
            mainCard.classList.remove('hidden');
            finalCard.classList.add('hidden');
            
            // Cargar im√°genes
            cargarImagenSegura('novia.png.png', noviaContainer, 'üíñ');
            
            // Inicializar contador
            actualizarContador();
            setInterval(actualizarContador, 60000);
            
            // Crear corazones iniciales
            crearCorazonesIniciales();
            heartInterval = setInterval(crearCorazonAleatorio, 800);
            
            // Configurar botones
            configurarBotonSi();
            configurarBotonNoSimple();
            configurarBotonesFalsos();
            configurarBotonReinicio();
            
            console.log("üíñ P√°gina de San Valent√≠n cargada - Versi√≥n Simplificada");
            console.log("Es dispositivo t√°ctil:", isTouchDevice);
        });

        // ============ FUNCIONES DE IM√ÅGENES ============
        function cargarImagenSegura(src, container, fallbackEmoji) {
            const img = new Image();
            img.onload = function() {
                container.innerHTML = `<img src="${src}" alt="Imagen especial" style="width:100%;height:100%;object-fit:cover;">`;
                container.classList.add('loaded');
            };
            img.onerror = function() {
                container.innerHTML = `
                    <div class="img-placeholder">
                        <div style="font-size: 3em;">${fallbackEmoji}</div>
                        <p style="margin-top: 10px; font-size: 0.9em;">Nuestra foto</p>
                    </div>
                `;
                container.classList.add('loaded');
            };
            img.src = src;
        }

        // ============ CONTADOR DE TIEMPO ============
        function actualizarContador() {
            const hoy = new Date();
            
            let a√±os = hoy.getFullYear() - inicio.getFullYear();
            let meses = hoy.getMonth() - inicio.getMonth();
            let dias = hoy.getDate() - inicio.getDate();
            
            if (dias < 0) {
                meses--;
                const mesAnterior = new Date(hoy.getFullYear(), hoy.getMonth(), 0);
                dias += mesAnterior.getDate();
            }
            
            if (meses < 0) {
                a√±os--;
                meses += 12;
            }
            
            const diffTiempo = hoy.getTime() - inicio.getTime();
            const diffDias = Math.floor(diffTiempo / (1000 * 60 * 60 * 24));
            
            // Actualizar displays
            document.getElementById('years').textContent = a√±os;
            document.getElementById('months').textContent = meses;
            document.getElementById('days').textContent = dias;
            document.getElementById('totalDays').textContent = diffDias;
        }

        // ============ BOT√ìN S√ç ============
        function configurarBotonSi() {
            // Para ambos: PC y m√≥viles
            yesBtn.addEventListener('click', function(e) {
                if (e) {
                    e.stopPropagation();
                    e.preventDefault();
                }
                
                escapeMode = false;
                
                // Animaci√≥n
                yesBtn.style.transform = 'scale(1.2)';
                yesBtn.style.background = 'linear-gradient(135deg, #ff0066, #ff66b3)';
                
                // Confeti de corazones
                for (let i = 0; i < 50; i++) {
                    setTimeout(() => crearCorazonEspecial(['üíñ', 'üíï', 'üíò'][Math.floor(Math.random() * 3)]), i * 30);
                }
                
                // Mostrar pantalla final
                setTimeout(mostrarPantallaFinal, 800);
            });
            
            // Tambi√©n para toques en m√≥viles
            yesBtn.addEventListener('touchstart', function(e) {
                if (e.cancelable) {
                    e.preventDefault();
                }
                this.style.opacity = '0.9';
                this.style.transform = 'scale(0.98)';
            });
            
            yesBtn.addEventListener('touchend', function(e) {
                if (e.cancelable) {
                    e.preventDefault();
                }
                this.style.opacity = '1';
                this.style.transform = 'scale(1)';
                // Disparar el clic despu√©s de un peque√±o delay
                setTimeout(() => {
                    const clickEvent = new Event('click');
                    this.dispatchEvent(clickEvent);
                }, 50);
            });
        }

        // ============ BOT√ìN NO SIMPLIFICADO ============
        function configurarBotonNoSimple() {
            // Sistema simple: se mueve aleatoriamente cuando intentas hacer clic
            
            // Para clics de mouse
            noBtn.addEventListener('mousedown', function(e) {
                e.preventDefault();
                e.stopPropagation();
                moverBotonNoAleatorio();
                manejarIntentoClicNo();
            });
            
            // Para toques en m√≥viles
            noBtn.addEventListener('touchstart', function(e) {
                if (e.cancelable) {
                    e.preventDefault();
                }
                e.stopPropagation();
                
                // Mover inmediatamente
                moverBotonNoAleatorio();
                
                // Vibrar
                if (navigator.vibrate) {
                    navigator.vibrate(50);
                }
                
                // Manejar como intento de clic despu√©s de un breve delay
                setTimeout(() => {
                    manejarIntentoClicNo();
                }, 100);
                
                // Feedback visual
                this.style.opacity = '0.8';
                this.style.transform += ' scale(0.95)';
            });
            
            noBtn.addEventListener('touchend', function(e) {
                if (e.cancelable) {
                    e.preventDefault();
                }
                this.style.opacity = '1';
                this.style.transform = this.style.transform.replace(' scale(0.95)', '');
            });
            
            // Tambi√©n mover aleatoriamente peri√≥dicamente
            setInterval(() => {
                if (escapeMode && Math.random() > 0.7) {
                    moverBotonNoAleatorio();
                }
            }, 2000);
        }

        function moverBotonNoAleatorio() {
            if (!escapeMode) return;
            
            const container = document.querySelector('.buttons-container');
            if (!container) return;
            
            const containerRect = container.getBoundingClientRect();
            const buttonWidth = noBtn.offsetWidth;
            const buttonHeight = noBtn.offsetHeight;
            
            // Calcular nueva posici√≥n aleatoria
            const maxX = containerRect.width - buttonWidth - 20;
            const maxY = containerRect.height - buttonHeight - 20;
            
            // Asegurar que no est√© en el mismo lugar
            let newX, newY;
            do {
                newX = Math.random() * maxX;
                newY = Math.random() * maxY;
            } while (Math.abs(newX) < 20 && Math.abs(newY) < 20);
            
            // Aplicar movimiento con transici√≥n r√°pida
            noBtn.style.transition = 'all 0.3s ease';
            noBtn.style.transform = `translate(${newX}px, ${newY}px)`;
            
            // Efecto visual
            noBtn.style.boxShadow = '0 0 20px rgba(255, 0, 0, 0.5)';
            setTimeout(() => {
                noBtn.style.boxShadow = '';
            }, 300);
        }

        function manejarIntentoClicNo() {
            if (!escapeMode) return;
            
            failedClicks++;
            
            // Cambiar texto temporalmente
            const originalText = noBtn.innerHTML;
            const messageIndex = Math.min(failedClicks - 1, failMessages.length - 1);
            let message = failMessages[messageIndex] || failMessages[failMessages.length - 1];
            message = message.replace('%', failedClicks);
            
            noBtn.innerHTML = `<i class="fas fa-ban"></i> ${message}`;
            noBtn.style.background = 'linear-gradient(135deg, #ff0000, #cc0000)';
            noBtn.style.color = 'white';
            
            // Cambiar animaci√≥n temporalmente
            const currentAnimation = noBtn.style.animation;
            noBtn.style.animation = 'none';
            
            // Corazones de rechazo
            for (let i = 0; i < 3; i++) {
                setTimeout(() => crearCorazonEspecial('‚ùå'), i * 100);
            }
            
            // Actualizar advertencia
            const warning = document.querySelector('.warning');
           
            warning.style.background = '#ffcccc';
            warning.style.color = '#cc0000';
            
            // Restaurar despu√©s de 1.5 segundos
            setTimeout(() => {
                noBtn.innerHTML = originalText;
                noBtn.style.background = '';
                noBtn.style.color = '';
                noBtn.style.animation = currentAnimation || (isTouchDevice ? 'mobileNoShake 0.4s infinite' : 'noShake 0.5s infinite');
                warning.style.background = '';
                warning.style.color = '';
            }, 1500);
            
            // Hacerlo m√°s dif√≠cil
            if (failedClicks > 3) {
                // Aumentar frecuencia de movimiento
                clearInterval(noBtn.moveInterval);
                noBtn.moveInterval = setInterval(() => {
                    if (escapeMode && Math.random() > 0.5) {
                        moverBotonNoAleatorio();
                    }
                }, 1500);
            }
        }

        // ============ PANTALLA FINAL ============
        function mostrarPantallaFinal() {
            // Ocultar tarjeta principal
            mainCard.classList.add('hidden');
            
            // Mostrar tarjeta final
            finalCard.classList.remove('hidden');
            finalCard.style.display = 'block';
            
            // Reiniciar animaci√≥n
            finalCard.style.animation = 'none';
            setTimeout(() => {
                finalCard.style.animation = 'celebrate 0.8s ease-out';
            }, 10);
            
            // Cargar imagen de pareja
            cargarImagenSegura('pareja.png.png', parejaContainer, 'üë´');
            
            // Detener corazones anteriores
            if (heartInterval) {
                clearInterval(heartInterval);
            }
            
            // M√°s corazones para celebraci√≥n
            heartInterval = setInterval(crearCorazonAleatorio, 400);
            
            // Iniciar contador en vivo
            actualizarContadorEnVivo();
            if (liveTimerInterval) {
                clearInterval(liveTimerInterval);
            }
            liveTimerInterval = setInterval(actualizarContadorEnVivo, 1000);
        }

        function actualizarContadorEnVivo() {
            const hoy = new Date();
            const diffTiempo = hoy.getTime() - inicio.getTime();
            
            const diffDias = Math.floor(diffTiempo / (1000 * 60 * 60 * 24));
            const diffHoras = Math.floor((diffTiempo % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const diffMinutos = Math.floor((diffTiempo % (1000 * 60 * 60)) / (1000 * 60));
            const diffSegundos = Math.floor((diffTiempo % (1000 * 60)) / 1000);
            
            // Actualizar displays
            document.getElementById('liveDays').textContent = diffDias;
            document.getElementById('liveHours').textContent = diffHoras;
            document.getElementById('liveMinutes').textContent = diffMinutos;
            document.getElementById('liveSeconds').textContent = diffSegundos;
        }

        // ============ BOT√ìN REINICIO ============
        function configurarBotonReinicio() {
            restartBtn.addEventListener('click', function() {
                reiniciarPagina();
            });
            
            // Tambi√©n para toques
            restartBtn.addEventListener('touchstart', function(e) {
                if (e.cancelable) {
                    e.preventDefault();
                }
                this.style.opacity = '0.9';
                this.style.transform = 'scale(0.98)';
            });
            
            restartBtn.addEventListener('touchend', function(e) {
                if (e.cancelable) {
                    e.preventDefault();
                }
                this.style.opacity = '1';
                this.style.transform = 'scale(1)';
                reiniciarPagina();
            });
        }

        function reiniciarPagina() {
            // Limpiar intervalos
            if (liveTimerInterval) {
                clearInterval(liveTimerInterval);
                liveTimerInterval = null;
            }
            
            if (heartInterval) {
                clearInterval(heartInterval);
                heartInterval = null;
            }
            
            // Resetear variables
            escapeMode = true;
            failedClicks = 0;
            
            // Resetear bot√≥n NO
            noBtn.style.transform = 'translate(0, 0)';
            noBtn.style.background = '';
            noBtn.style.color = '';
            noBtn.innerHTML = '<i class="fas fa-sad-cry"></i> No <i class="fas fa-sad-cry"></i>';
            noBtn.style.animation = isTouchDevice ? 'mobileNoShake 0.4s infinite' : 'noShake 0.5s infinite';
            
            // Resetear bot√≥n S√ç
            yesBtn.style.transform = '';
            yesBtn.style.background = '';
            yesBtn.style.animation = 'yesPulse 2s infinite';
            
            // Resetear botones falsos
            const textosOriginales = ['Tal vez', 'No s√©', 'Preg√∫ntame despu√©s'];
            fakeButtons.forEach((btn, index) => {
                if (btn) {
                    btn.textContent = textosOriginales[index];
                    btn.style.background = '';
                    btn.style.color = '';
                }
            });
            
            // Resetear advertencia
            const warning = document.querySelector('.warning');
         
            warning.style.background = '';
            warning.style.color = '';
            
            // Ocultar tarjeta final
            finalCard.classList.add('hidden');
            
            // Mostrar tarjeta principal
            mainCard.classList.remove('hidden');
            mainCard.style.display = 'block';
            
            // Reiniciar corazones
            crearCorazonesIniciales();
            heartInterval = setInterval(crearCorazonAleatorio, 800);
            
            console.log("üîÑ P√°gina reiniciada correctamente");
        }

        // ============ BOTONES FALSOS ============
        function configurarBotonesFalsos() {
            const textosOriginales = ['Tal vez', 'No s√©', 'Preg√∫ntame despu√©s'];
            
            fakeButtons.forEach((btn, index) => {
                if (!btn) return;
                
                // Configurar clic
                btn.addEventListener('click', function() {
                    btn.textContent = '¬°Dejaras a las ni√±as sin Pap√°??';
                    btn.style.background = 'linear-gradient(135deg, #ff4d6d, #ff3366)';
                    btn.style.color = 'white';
                    
                    setTimeout(() => {
                        btn.textContent = textosOriginales[index];
                        btn.style.background = '';
                        btn.style.color = '';
                    }, 1500);
                });
                
                // Configurar toques para m√≥viles
                btn.addEventListener('touchstart', function(e) {
                    if (e.cancelable) {
                        e.preventDefault();
                    }
                    this.style.opacity = '0.9';
                    this.style.transform = 'scale(0.98)';
                });
                
                btn.addEventListener('touchend', function(e) {
                    if (e.cancelable) {
                        e.preventDefault();
                    }
                    this.style.opacity = '1';
                    this.style.transform = 'scale(1)';
                    // Disparar clic
                    const clickEvent = new Event('click');
                    this.dispatchEvent(clickEvent);
                });
            });
        }

        // ============ CORAZONES ANIMADOS ============
        function crearCorazonesIniciales() {
            for (let i = 0; i < 15; i++) {
                setTimeout(() => crearCorazonAleatorio(), i * 300);
            }
        }

        function crearCorazonAleatorio() {
            const heart = document.createElement('div');
            heart.className = 'heart-float';
            heart.innerHTML = ['‚ù§Ô∏è', 'üíñ', 'üíï', 'üíò'][Math.floor(Math.random() * 4)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = (Math.random() * 20 + 18) + 'px';
            heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
            heart.style.animationDelay = Math.random() * 2 + 's';
            
            heartsContainer.appendChild(heart);
            
            // Remover despu√©s de la animaci√≥n
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            }, 6000);
        }

        function crearCorazonEspecial(emoji) {
            const heart = document.createElement('div');
            heart.className = 'heart-float';
            heart.innerHTML = emoji;
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = (Math.random() * 25 + 20) + 'px';
            heart.style.animationDuration = (Math.random() * 2 + 2) + 's';
            heart.style.zIndex = '1000';
            
            heartsContainer.appendChild(heart);
            
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            }, 4000);
        }
    </script>
</body>
</html>



